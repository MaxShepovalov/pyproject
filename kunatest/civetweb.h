/////////////////////////////////////////////////////////////////////////////
//
// @file  civetweb_test.cc
//
// @brief Mocked civetweb library for kunarest unit tests.
//        Functionality was seriously cut. There are only function that are
//        used by kunarest module. Structures' contence is also cut. Now they
//        have only necessary items.
//
// @copy  Copyright 2016 Kuna Systems Corporation. All rights reserved.
//
/////////////////////////////////////////////////////////////////////////////

#include <civetweb.h>
#include <stdio.h>
#include <stddef.h>


//////////////////////////////////////////////////////////////////////////////
//printf macros (raw copy)
//////////////////////////////////////////////////////////////////////////////
#undef PRINTF_FORMAT_STRING
#if defined(_MSC_VER) && _MSC_VER >= 1400
#include <sal.h>
#if defined(_MSC_VER) && _MSC_VER > 1400
#define PRINTF_FORMAT_STRING(s) _Printf_format_string_ s
#else
#define PRINTF_FORMAT_STRING(s) __format_string s
#endif
#else
#define PRINTF_FORMAT_STRING(s) s
#endif

/*              STRUCTURES
 *****************************************************************************
 */

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
struct  mg_connection{
    const char *method; //GET, PUT, PATCH
};

//variable for sending to server
void* server_in;

//variable for receiving from server
void* server_out;

//variable for method "GET" "PUT" "PATCH"
char* server_method;

//////////////////////////////////////////////////////////////////////////////
//reduced structure
//////////////////////////////////////////////////////////////////////////////
struct mg_request_info
{
    const char *request_method;
};

/*              FUNCTIONS
 ****************************************************************************
 */

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
int mg_printf(struct mg_connection *, const char *fmt, ...);

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
int mg_write(struct mg_connection *, const void *buf, size_t len);

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
int mg_read(struct mg_connection *, void *buf, size_t len);

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
void make_info(char* method, void* server_out);

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
struct mg_request_info *mg_get_request_info(struct mg_connection *);
